<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ  Home - Fit Tracker</title>

  <!-- Manifest PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- Favicon (opzionale) -->
  <link rel="icon" href="kettlebell-preview.png" type="image/png">

  <!-- Stile -->
  <link rel="stylesheet" href="style.css">

  <!-- Script -->
  <script src="script.js" defer></script>
  <script src="app.js" defer></script>

</head>

<body>

  <!-- Toggle tema -->
  <button id="theme-toggle" aria-label="Toggle tema">ğŸŒ™</button>

  <!-- Saluto utente -->
  <div id="user-greeting" class="user-greeting"></div>

  <h1>ğŸ  Benvenuto in Fit Tracker</h1>

  <!-- Menu principale -->
  <button class="button" onclick="location.href='programma-allenamento.html'">
    ğŸ’ª Programma Allenamento
  </button>

  <button class="button" onclick="location.href='piano-alimentare.html'">
    ğŸ½ï¸ Piano Alimentare
  </button>

  <button class="button" onclick="location.href='lista-spesa-giornaliera.html'">
    ğŸ›’ Lista Spesa Giornaliera
  </button>

  <button class="button" onclick="location.href='aggiungi-peso.html'">
    â• Aggiungi Peso
  </button>

  <div id="toast-container"></div>

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => {
            console.log('âœ… Service Worker registrato con successo.');
            reg.onupdatefound = () => {
              const newWorker = reg.installing;
              newWorker.onstatechange = () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  console.log('âš¡ Nuova versione disponibile, aggiorno...');
                  window.location.reload();
                }
              };
            };
          })
          .catch(err => console.error('âŒ Errore durante registrazione Service Worker:', err));
      });
    }
  </script>

</body>
</html>
